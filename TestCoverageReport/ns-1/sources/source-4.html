


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > GameScreen</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.mygdx.game</a>
</div>

<h1>Coverage Summary for Class: GameScreen (com.mygdx.game)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">GameScreen</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/25)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/361)
  </span>
</td>
</tr>
  <tr>
    <td class="name">GameScreen$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameScreen$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameScreen$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameScreen$4</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameScreen$5</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameScreen$6</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameScreen$7</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameScreen$8</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameScreen$9</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/43)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/398)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.mygdx.game;
&nbsp;
&nbsp;import com.badlogic.gdx.Gdx;
&nbsp;import com.badlogic.gdx.Input;
&nbsp;import com.badlogic.gdx.Input.Keys;
&nbsp;import com.badlogic.gdx.Screen;
&nbsp;import com.badlogic.gdx.audio.Music;
&nbsp;import com.badlogic.gdx.graphics.Color;
&nbsp;import com.badlogic.gdx.graphics.GL20;
&nbsp;import com.badlogic.gdx.graphics.OrthographicCamera;
&nbsp;import com.badlogic.gdx.graphics.Texture;
&nbsp;import com.badlogic.gdx.graphics.g2d.BitmapFont;
&nbsp;import com.badlogic.gdx.graphics.g2d.TextureRegion;
&nbsp;import com.badlogic.gdx.maps.MapLayer;
&nbsp;import com.badlogic.gdx.maps.MapObject;
&nbsp;import com.badlogic.gdx.maps.objects.RectangleMapObject;
&nbsp;import com.badlogic.gdx.maps.tiled.TiledMap;
&nbsp;import com.badlogic.gdx.maps.tiled.TiledMapRenderer;
&nbsp;import com.badlogic.gdx.maps.tiled.renderers.OrthogonalTiledMapRenderer;
&nbsp;import com.badlogic.gdx.math.Rectangle;
&nbsp;import com.badlogic.gdx.math.Vector2;
&nbsp;import com.badlogic.gdx.scenes.scene2d.InputEvent;
&nbsp;import com.badlogic.gdx.scenes.scene2d.Stage;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Button;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Image;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Label;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Label.LabelStyle;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Table;
&nbsp;import com.badlogic.gdx.scenes.scene2d.utils.ClickListener;
&nbsp;import com.badlogic.gdx.scenes.scene2d.utils.Drawable;
&nbsp;import com.badlogic.gdx.scenes.scene2d.utils.TextureRegionDrawable;
&nbsp;import com.badlogic.gdx.utils.Align;
&nbsp;import com.badlogic.gdx.utils.viewport.FitViewport;
&nbsp;import com.mygdx.game.Core.Chef.MasterChef;
&nbsp;import com.mygdx.game.Core.ConstructMachines;
&nbsp;import com.mygdx.game.Core.Customers.CustomerController;
&nbsp;import com.mygdx.game.Core.GameState.Difficulty;
&nbsp;import com.mygdx.game.Core.GameState.DifficultyMaster;
&nbsp;import com.mygdx.game.Core.GameState.DifficultyState;
&nbsp;import com.mygdx.game.Core.GameState.GameState;
&nbsp;import com.mygdx.game.Core.GameState.SaveState;
&nbsp;import com.mygdx.game.Core.PathFinder.Pathfinding;
&nbsp;import com.mygdx.game.Core.Powerups.Powerup;
&nbsp;import com.mygdx.game.Core.Powerups.PowerupPurchaseMenu;
&nbsp;import com.mygdx.game.Core.Rendering.BlackTexture;
&nbsp;import com.mygdx.game.Core.Rendering.GameObject;
&nbsp;import com.mygdx.game.Core.Rendering.GameObjectManager;
&nbsp;import com.mygdx.game.Core.Rendering.RenderManager;
&nbsp;import com.mygdx.game.Core.SFX.SoundFrame;
&nbsp;import com.mygdx.game.Core.Scriptable;
&nbsp;import com.mygdx.game.Core.ValueStructures.CustomerControllerParams;
&nbsp;import com.mygdx.game.Core.ValueStructures.EndOfGameValues;
&nbsp;import com.mygdx.game.Items.ItemEnum;
&nbsp;import com.mygdx.game.RecipeAndComb.CombinationDict;
&nbsp;import com.mygdx.game.RecipeAndComb.RecipeDict;
&nbsp;import com.mygdx.game.Stations.Station;
&nbsp;import java.util.LinkedList;
&nbsp;import java.util.List;
&nbsp;
&nbsp;/**
&nbsp; * This is the main class of the game which runs all the logic and rendering Here all the outside
&nbsp; * objects are created and drawn as well as interactions registered
&nbsp; * &lt;p&gt;
&nbsp; * Black Cat Studios and Team Triple 10s
&nbsp; *
&nbsp; * @author Robin Graham
&nbsp; * @author Riko Puusepp
&nbsp; * @author Kelvin Chen
&nbsp; * @author Amy Cross
&nbsp; * @author Labib Zabeneh
&nbsp; * @author Felix Seanor
&nbsp; * @author Jack Vickers
&nbsp; * @author Jack Hinton
&nbsp; * @author Sam Toner
&nbsp; * @date 01 /05/23
&nbsp; */
<b class="nc">&nbsp;public class GameScreen implements Screen {</b>
&nbsp;
&nbsp;  // game attributes
&nbsp;  private final MyGdxGame game;
&nbsp;
&nbsp;  // camera
&nbsp;  private final OrthographicCamera camera;
&nbsp;  private Pathfinding pathfinding;
&nbsp;  /**
&nbsp;   * The constant TILE_WIDTH.
&nbsp;   */
&nbsp;  public static final int TILE_WIDTH = 32;
&nbsp;  /**
&nbsp;   * The constant TILE_HEIGHT.
&nbsp;   */
&nbsp;  public static final int TILE_HEIGHT = 32;
&nbsp;
&nbsp;  /**
&nbsp;   * The Customer controller.
&nbsp;   */
&nbsp;  public CustomerController customerController;
&nbsp;
&nbsp;  /**
&nbsp;   * The Powerup.
&nbsp;   */
&nbsp;  public Powerup powerup;
&nbsp;  /**
&nbsp;   * The Powerup purchase menu.
&nbsp;   */
&nbsp;  public PowerupPurchaseMenu powerupPurchaseMenu;
&nbsp;
&nbsp;
&nbsp;  // map
&nbsp;  private final TiledMapRenderer mapRenderer;
&nbsp;
&nbsp;  /**
&nbsp;   * The Master chef.
&nbsp;   */
&nbsp;  public MasterChef masterChef;
&nbsp;
&nbsp;  /**
&nbsp;   * The Num ovens.
&nbsp;   */
<b class="nc">&nbsp;  public int numOvens = 0;</b>
&nbsp;  /**
&nbsp;   * The Exit logo.
&nbsp;   */
<b class="nc">&nbsp;  public GameObject exitLogo = new GameObject(new BlackTexture(&quot;Exit.png&quot;));</b>
&nbsp;
&nbsp;
&nbsp;  // game timer and displayTimer
<b class="nc">&nbsp;  private float seconds = 0f;</b>
<b class="nc">&nbsp;  private int timer = 0;</b>
&nbsp;  private final Label timerLabel;
&nbsp;  private final Label moneyLabel;
&nbsp;  private final BitmapFont timerFont;
&nbsp;
&nbsp;  /**
&nbsp;   * The Paused.
&nbsp;   */
<b class="nc">&nbsp;  boolean paused = false;</b>
&nbsp;  /**
&nbsp;   * The Difficulty state.
&nbsp;   */
&nbsp;  DifficultyState difficultyState;
&nbsp;
&nbsp;  /**
&nbsp;   * The Construct machines.
&nbsp;   */
&nbsp;  ConstructMachines constructMachines;
&nbsp;  /**
&nbsp;   * The Difficulty.
&nbsp;   */
&nbsp;  Difficulty difficulty;
&nbsp;  /**
&nbsp;   * The constant viewportWidth.
&nbsp;   */
&nbsp;  public static final int viewportWidth = 32 * TILE_WIDTH;
&nbsp;  /**
&nbsp;   * The constant viewportHeight.
&nbsp;   */
&nbsp;  public static final int viewportHeight = 18 * TILE_HEIGHT;
&nbsp;  /**
&nbsp;   * The Game music.
&nbsp;   */
&nbsp;  Music gameMusic;
&nbsp;
&nbsp;  /**
&nbsp;   * The Recipe screen.
&nbsp;   */
&nbsp;  public ShowRecipeInstructions recipeScreen;
&nbsp;  /**
&nbsp;   * The Mode label.
&nbsp;   */
&nbsp;  Label modeLabel;
&nbsp;
&nbsp;  /**
&nbsp;   * The Pause stage.
&nbsp;   */
&nbsp;  Stage pauseStage; // stage for the pause menu
&nbsp;  /**
&nbsp;   * The Game ui stage.
&nbsp;   */
&nbsp;  Stage gameUIStage; // stage for the game UI
&nbsp;  /**
&nbsp;   * The Instructions stage.
&nbsp;   */
&nbsp;  Stage instructionsStage; // stage for the instructions
&nbsp;  /**
&nbsp;   * The Scale x.
&nbsp;   */
&nbsp;  float scaleX;
&nbsp;  /**
&nbsp;   * The Scale y.
&nbsp;   */
&nbsp;  float scaleY;
&nbsp;  /**
&nbsp;   * The Is endless mode.
&nbsp;   */
&nbsp;  boolean isEndlessMode;
&nbsp;  /**
&nbsp;   * The Viewport.
&nbsp;   */
&nbsp;  FitViewport viewport;
&nbsp;  /**
&nbsp;   * The End screen.
&nbsp;   */
&nbsp;  EndScreen endScreen;
&nbsp;  /**
&nbsp;   * The Is instructions visible.
&nbsp;   */
&nbsp;  boolean isInstructionsVisible;
&nbsp;  /**
&nbsp;   * The Resume button.
&nbsp;   */
&nbsp;  Button resumeButton;
&nbsp;  /**
&nbsp;   * The Instructions resume button.
&nbsp;   */
&nbsp;  Button instructionsResumeButton;
&nbsp;
&nbsp;  /**
&nbsp;   * Constructor class which initialises all the variables needed to draw the sprites and also
&nbsp;   * manage the logic of the render as well as setting the camera and map Mixture of BlackCatStudios
&nbsp;   * and TeamTriple10
&nbsp;   *
&nbsp;   * @param game            base Object which is used to draw on
&nbsp;   * @param map             the map
&nbsp;   * @param numCustomers    the num customers
&nbsp;   * @param difficultyLevel the difficulty level
&nbsp;   * @param loadSave        the load save
&nbsp;   * @author Amy Cross
&nbsp;   * @author Felix Seanor
&nbsp;   * @author Sam Toner
&nbsp;   * @author Jack Vickers
&nbsp;   * @author Jack Hinton
&nbsp;   */
&nbsp;  public GameScreen(MyGdxGame game, TiledMap map, int numCustomers,
<b class="nc">&nbsp;      Difficulty difficultyLevel, boolean loadSave) {</b>
&nbsp;    //Triple10s
<b class="nc">&nbsp;    this.game = game;</b>
<b class="nc">&nbsp;    camera = new OrthographicCamera();</b>
<b class="nc">&nbsp;    recipeScreen = new ShowRecipeInstructions();</b>
&nbsp;    //recipeScreen.showRecipeInstruction();
&nbsp;    //BlackCatStudios
<b class="nc">&nbsp;    CameraFunctions camera1 = CameraFunctions.camera;</b>
<b class="nc">&nbsp;    camera1.updateCamera(camera);</b>
<b class="nc">&nbsp;    viewport = new FitViewport(720, 1280, camera);</b>
&nbsp;//Triple10s
<b class="nc">&nbsp;    camera.setToOrtho(false, viewportWidth, viewportHeight);</b>
<b class="nc">&nbsp;    camera.update();</b>
&nbsp;
<b class="nc">&nbsp;    gameMusic = Gdx.audio.newMusic(Gdx.files.internal(&quot;gameMusic.mp3&quot;));</b>
<b class="nc">&nbsp;    gameMusic.setLooping(true);</b>
&nbsp;
&nbsp;    //BlackCatStudios
<b class="nc">&nbsp;    recipeScreen.createInstructionPage(&quot;Empty&quot;);</b>
&nbsp;
<b class="nc">&nbsp;    exitLogo.isVisible = false;</b>
<b class="nc">&nbsp;    exitLogo.getBlackTexture().height = 30;</b>
<b class="nc">&nbsp;    exitLogo.getBlackTexture().width = 30;</b>
<b class="nc">&nbsp;    exitLogo.position = new Vector2(713, 454);</b>
&nbsp;
&nbsp;    // add map
<b class="nc">&nbsp;    mapRenderer = new OrthogonalTiledMapRenderer(map);</b>
<b class="nc">&nbsp;    mapRenderer.setView(camera);</b>
&nbsp;
<b class="nc">&nbsp;    difficultyState = DifficultyMaster.getDifficulty(difficultyLevel);</b>
&nbsp;
<b class="nc">&nbsp;    pathfinding = new Pathfinding(TILE_WIDTH / 4, viewportWidth, viewportWidth);</b>
&nbsp;
<b class="nc">&nbsp;    masterChef = new MasterChef(3, camera, pathfinding, difficultyState.chefParams,</b>
&nbsp;        difficultyState.cookingParams);
<b class="nc">&nbsp;    GameObjectManager.objManager.appendLooseScript(masterChef);</b>
&nbsp;
<b class="nc">&nbsp;    CustomerControllerParams CCParams = difficultyState.ccParams;</b>
&nbsp;
<b class="nc">&nbsp;    CCParams.noCustomers = numCustomers;</b>
<b class="nc">&nbsp;    List&lt;Vector2&gt; tables = getTablesDirty(map);</b>
&nbsp;
<b class="nc">&nbsp;    Vector2[] tablePositions = new Vector2[tables.size()];</b>
&nbsp;
<b class="nc">&nbsp;    int z = 0;</b>
<b class="nc">&nbsp;    for (Vector2 t : tables</b>
&nbsp;    ) {
<b class="nc">&nbsp;      tablePositions[z++] = t;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    customerController = new CustomerController(new Vector2(224, 0), new Vector2(360, 180),</b>
<b class="nc">&nbsp;        pathfinding, (EndOfGameValues vals) -&gt; endGame(vals), CCParams, tablePositions);</b>
&nbsp;    // customerController.SetWaveAmount(1);//Demonstration on how to do waves, -1 for endless
&nbsp;
<b class="nc">&nbsp;    powerup = new Powerup(masterChef, customerController); // powerup object</b>
<b class="nc">&nbsp;    powerupPurchaseMenu = new PowerupPurchaseMenu(customerController, powerup, masterChef);</b>
<b class="nc">&nbsp;    powerupPurchaseMenu.initialiseState();</b>
<b class="nc">&nbsp;    GameObjectManager.objManager.appendLooseScript(powerupPurchaseMenu);</b>
<b class="nc">&nbsp;    GameObjectManager.objManager.appendLooseScript(customerController);</b>
&nbsp;
<b class="nc">&nbsp;    constructMachines = new ConstructMachines(customerController, difficultyState, pathfinding);</b>
&nbsp;
<b class="nc">&nbsp;    new CombinationDict();</b>
<b class="nc">&nbsp;    CombinationDict.combinations.implementItems();</b>
<b class="nc">&nbsp;    new RecipeDict();</b>
<b class="nc">&nbsp;    RecipeDict.recipes.implementRecipes();</b>
&nbsp;
<b class="nc">&nbsp;    int[] objectLayers = {3, 4, 6, 9, 11, 13, 16, 18, 20, 22, 24, 25, 26, 27, 28, 29, 30, 31, 32,</b>
&nbsp;        33, 34, 35, 36, 37, 38, 39};
&nbsp;
&nbsp;    //Fixed the hideous mechanism for creating collidable objects
<b class="nc">&nbsp;    for (int n = 0; n &lt; 18; n++) {</b>
<b class="nc">&nbsp;      MapLayer layer = map.getLayers().get(n);</b>
<b class="nc">&nbsp;      String name = layer.getName();</b>
&nbsp;
<b class="nc">&nbsp;      for (MapObject object : layer.getObjects()</b>
<b class="nc">&nbsp;          .getByType(RectangleMapObject.class)) {</b>
&nbsp;
<b class="nc">&nbsp;        Rectangle rect = ((RectangleMapObject) object).getRectangle();</b>
<b class="nc">&nbsp;        constructMachines.buildObject(rect.getX(), rect.getY(), rect.getWidth(),</b>
<b class="nc">&nbsp;            rect.getHeight(), &quot;Static&quot;,</b>
&nbsp;            name);
&nbsp;
<b class="nc">&nbsp;        switch (name) {</b>
&nbsp;          case &quot;tables&quot;:
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;bin&quot;:
<b class="nc">&nbsp;            constructMachines.createBin(rect);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;counter&quot;:
<b class="nc">&nbsp;            constructMachines.createAssembly(rect);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;frying&quot;:
<b class="nc">&nbsp;            constructMachines.createHobs(rect);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;chopping board&quot;:
<b class="nc">&nbsp;            constructMachines.createChopping(rect);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;toaster&quot;:
<b class="nc">&nbsp;            constructMachines.createToaster(rect);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;oven&quot;:
<b class="nc">&nbsp;            constructMachines.createOven(rect, customerController);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;customer counter&quot;:
<b class="nc">&nbsp;            constructMachines.createCustomerCounters(rect);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;tomato&quot;:
<b class="nc">&nbsp;            constructMachines.createFoodCrates(rect, ItemEnum.Tomato);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;lettuce&quot;:
<b class="nc">&nbsp;            constructMachines.createFoodCrates(rect, ItemEnum.Lettuce);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;onion&quot;:
<b class="nc">&nbsp;            constructMachines.createFoodCrates(rect, ItemEnum.Onion);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;mince&quot;:
<b class="nc">&nbsp;            constructMachines.createFoodCrates(rect, ItemEnum.Mince);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;buns&quot;:
<b class="nc">&nbsp;            constructMachines.createFoodCrates(rect, ItemEnum.Buns);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;dough&quot;:
<b class="nc">&nbsp;            constructMachines.createFoodCrates(rect, ItemEnum.Dough);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;cheese&quot;:
<b class="nc">&nbsp;            constructMachines.createFoodCrates(rect, ItemEnum.Cheese);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;potato&quot;:
<b class="nc">&nbsp;            constructMachines.createFoodCrates(rect, ItemEnum.Potato);</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;          case &quot;toolbox&quot;:
<b class="nc">&nbsp;            constructMachines.createFoodCrates(rect, ItemEnum.RepairTool);</b>
&nbsp;        }
<b class="nc">&nbsp;      }</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    //Team  Triple10
<b class="nc">&nbsp;    timerLabel = new Label(&quot;TIME: &quot; + timer,</b>
&nbsp;        new Label.LabelStyle(new BitmapFont(), Color.WHITE));
&nbsp;    //BlackCatStudios
<b class="nc">&nbsp;    moneyLabel = new Label(&quot;Money: ¥&quot; + timer,</b>
&nbsp;        new Label.LabelStyle(new BitmapFont(), Color.WHITE));
&nbsp;
<b class="nc">&nbsp;    timerFont = new BitmapFont();</b>
<b class="nc">&nbsp;    pauseStage = new Stage();</b>
&nbsp;
&nbsp;    // Calculates the scale of the screen to the original size of the game
<b class="nc">&nbsp;    scaleX = Gdx.graphics.getWidth() / 640f;</b>
<b class="nc">&nbsp;    scaleY = Gdx.graphics.getHeight() / 480f;</b>
<b class="nc">&nbsp;    if (loadSave) { // if the game is being loaded from a save</b>
<b class="nc">&nbsp;      loadGame(&quot;SavedData.ser&quot;);</b>
&nbsp;    }
<b class="nc">&nbsp;    isEndlessMode = CCParams.noCustomers == -1;</b>
<b class="nc">&nbsp;    setupPauseMenu();</b>
<b class="nc">&nbsp;    setupGameUI();</b>
&nbsp;  }
&nbsp;
&nbsp;
&nbsp;  private List&lt;Vector2&gt; getTablesDirty(TiledMap map) {
<b class="nc">&nbsp;    List&lt;Vector2&gt; tables = new LinkedList&lt;&gt;();</b>
<b class="nc">&nbsp;    for (int n = 0; n &lt; 18; n++) {</b>
<b class="nc">&nbsp;      MapLayer layer = map.getLayers().get(n);</b>
<b class="nc">&nbsp;      String name = layer.getName();</b>
&nbsp;
<b class="nc">&nbsp;      if (!name.contains(&quot;tables&quot;)) {</b>
<b class="nc">&nbsp;        continue;</b>
&nbsp;      }
&nbsp;
<b class="nc">&nbsp;      for (MapObject object : layer.getObjects()</b>
<b class="nc">&nbsp;          .getByType(RectangleMapObject.class)) {</b>
&nbsp;
<b class="nc">&nbsp;        Rectangle rect = ((RectangleMapObject) object).getRectangle();</b>
&nbsp;
<b class="nc">&nbsp;        tables.add(rect.getPosition(new Vector2()));</b>
&nbsp;
<b class="nc">&nbsp;      }</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    return tables;</b>
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Sets up the UI elements which will be displayed during the game. BlackCatStudio&#39;s code
&nbsp;   *
&nbsp;   * @author Jack Vickers
&nbsp;   */
&nbsp;  private void setupGameUI() {
&nbsp;    // sets up a stage for the UI
<b class="nc">&nbsp;    gameUIStage = new Stage();</b>
<b class="nc">&nbsp;    Gdx.input.setInputProcessor(gameUIStage);</b>
<b class="nc">&nbsp;    Table gameUITable = new Table();</b>
<b class="nc">&nbsp;    gameUIStage.addActor(gameUITable);</b>
<b class="nc">&nbsp;    gameUITable.setFillParent(true);</b>
<b class="nc">&nbsp;    gameUITable.align(Align.top);</b>
&nbsp;    // creates a label which displays whether the game is the endless mode or scenario mode
&nbsp;    // This label gets updates elsewhere to show either number of customers left or number
&nbsp;    // of customers served depending on the mode.
<b class="nc">&nbsp;    if (isEndlessMode) {</b>
<b class="nc">&nbsp;      modeLabel = new Label(&quot;ENDLESS MODE&quot;, new Label.LabelStyle(new BitmapFont(),</b>
&nbsp;          Color.WHITE));
<b class="nc">&nbsp;      modeLabel.setFontScale(1.1f * (scaleX + scaleY) / 2);</b>
<b class="nc">&nbsp;      gameUITable.add(modeLabel).expandX().align(Align.topLeft);</b>
&nbsp;    } else {
<b class="nc">&nbsp;      modeLabel = new Label(&quot;SCENARIO MODE&quot;,</b>
&nbsp;          new Label.LabelStyle(new BitmapFont(), Color.WHITE));
<b class="nc">&nbsp;      modeLabel.setFontScale(1.1f * (scaleX + scaleY) / 2);</b>
<b class="nc">&nbsp;      gameUITable.add(modeLabel).expandX().align(Align.topLeft);</b>
&nbsp;    }
<b class="nc">&nbsp;    updateCustomerLabel();</b>
&nbsp;
&nbsp;    // The following block of code creates the instruction button and adds it to the table
<b class="nc">&nbsp;    TextureRegion instructionBtn = new TextureRegion(new Texture(&quot;HowToPlayUp.png&quot;));</b>
<b class="nc">&nbsp;    TextureRegion instructionBtnDown = new TextureRegion(new Texture(&quot;HowToPlayDown.png&quot;));</b>
<b class="nc">&nbsp;    Drawable drawableInstructionBtn = new TextureRegionDrawable(instructionBtn);</b>
<b class="nc">&nbsp;    Drawable drawableInstructionBtnDown = new TextureRegionDrawable(instructionBtnDown);</b>
<b class="nc">&nbsp;    Button.ButtonStyle instructionButtonStyle = new Button.ButtonStyle();</b>
<b class="nc">&nbsp;    Button instructionButton = new Button();</b>
<b class="nc">&nbsp;    instructionButton.setStyle(instructionButtonStyle);</b>
<b class="nc">&nbsp;    instructionButtonStyle.up = drawableInstructionBtn;</b>
<b class="nc">&nbsp;    instructionButtonStyle.down = drawableInstructionBtnDown;</b>
<b class="nc">&nbsp;    gameUITable.add(instructionButton).width(100 * scaleX).height(30 * scaleY).align(Align.center)</b>
<b class="nc">&nbsp;        .uniform();</b>
&nbsp;
&nbsp;    // The following block of code adds a listener to the instruction button
<b class="nc">&nbsp;    instructionButton.addListener(new ClickListener() {</b>
&nbsp;      @Override
&nbsp;      public void clicked(InputEvent event, float x, float y) {
<b class="nc">&nbsp;        Gdx.input.setInputProcessor(instructionsStage);</b>
<b class="nc">&nbsp;        isInstructionsVisible = true;</b>
&nbsp;      }
&nbsp;    });
&nbsp;
&nbsp;    // Creates an instruction stage an table which will be used to display the game instructions
<b class="nc">&nbsp;    instructionsStage = new Stage();</b>
<b class="nc">&nbsp;    Image instructionImage = new Image(new Texture(&quot;Controls.png&quot;));</b>
<b class="nc">&nbsp;    instructionImage.setSize(instructionsStage.getWidth(), instructionsStage.getHeight());</b>
<b class="nc">&nbsp;    instructionImage.setPosition(0, 0);</b>
<b class="nc">&nbsp;    Image iconsImage = new Image(new Texture(&quot;Icons.png&quot;));</b>
<b class="nc">&nbsp;    iconsImage.setPosition(0, 0);</b>
<b class="nc">&nbsp;    iconsImage.setSize(instructionsStage.getWidth(), instructionsStage.getHeight());</b>
<b class="nc">&nbsp;    instructionsStage.addActor(instructionImage);</b>
<b class="nc">&nbsp;    Table instructionsTable = new Table();</b>
<b class="nc">&nbsp;    instructionsStage.addActor(instructionsTable);</b>
<b class="nc">&nbsp;    instructionsTable.setFillParent(true);</b>
<b class="nc">&nbsp;    instructionsTable.align(Align.top);</b>
&nbsp;
&nbsp;    // The following block of code creates the resume button and adds it to the instructions table
<b class="nc">&nbsp;    TextureRegion resumeBtn = new TextureRegion(new Texture(&quot;ResumeUp.png&quot;));</b>
<b class="nc">&nbsp;    TextureRegion resumeBtnDown = new TextureRegion(new Texture(&quot;ResumeDown.png&quot;));</b>
<b class="nc">&nbsp;    Drawable drawableResumeBtn = new TextureRegionDrawable(resumeBtn);</b>
<b class="nc">&nbsp;    Drawable drawableResumeBtnDown = new TextureRegionDrawable(resumeBtnDown);</b>
<b class="nc">&nbsp;    Button.ButtonStyle instructionsResumeButtonStyle = new Button.ButtonStyle();</b>
<b class="nc">&nbsp;    instructionsResumeButton = new Button();</b>
<b class="nc">&nbsp;    instructionsResumeButton.setStyle(instructionsResumeButtonStyle);</b>
<b class="nc">&nbsp;    instructionsResumeButtonStyle.up = drawableResumeBtn;</b>
<b class="nc">&nbsp;    instructionsResumeButtonStyle.down = drawableResumeBtnDown;</b>
<b class="nc">&nbsp;    instructionsTable.add(instructionsResumeButton).width(150 * scaleX).height(30 * scaleY)</b>
<b class="nc">&nbsp;        .expandX().align(Align.topLeft).pad(10);</b>
<b class="nc">&nbsp;    instructionsTable.row();</b>
&nbsp;
&nbsp;    // The following block of code adds a click listener to the resume button
<b class="nc">&nbsp;    instructionsResumeButton.addListener(new ClickListener() {</b>
&nbsp;      @Override
&nbsp;      public void clicked(InputEvent event, float x, float y) {
<b class="nc">&nbsp;        Gdx.input.setInputProcessor(gameUIStage); // set the input processor to the game UI stage</b>
<b class="nc">&nbsp;        isInstructionsVisible = false;</b>
<b class="nc">&nbsp;        instructionsStage.clear();</b>
<b class="nc">&nbsp;        instructionsStage.addActor(instructionImage);</b>
<b class="nc">&nbsp;        instructionsStage.addActor(instructionsTable);</b>
&nbsp;      }
&nbsp;    });
&nbsp;
<b class="nc">&nbsp;    TextureRegion iconsBtnUpTexture = new TextureRegion(new Texture(&quot;IconsUp.png&quot;));</b>
<b class="nc">&nbsp;    TextureRegion iconsBtnDownTexture = new TextureRegion(new Texture(&quot;IconsDown.png&quot;));</b>
<b class="nc">&nbsp;    Drawable iconsBtnUpDrawable = new TextureRegionDrawable(iconsBtnUpTexture);</b>
<b class="nc">&nbsp;    Drawable iconsBtnDownDrawable = new TextureRegionDrawable(iconsBtnDownTexture);</b>
<b class="nc">&nbsp;    Button.ButtonStyle iconsButtonStyle = new Button.ButtonStyle();</b>
<b class="nc">&nbsp;    Button iconsButton = new Button();</b>
<b class="nc">&nbsp;    iconsButton.setStyle(iconsButtonStyle);</b>
<b class="nc">&nbsp;    iconsButtonStyle.up = iconsBtnUpDrawable;</b>
<b class="nc">&nbsp;    iconsButtonStyle.down = iconsBtnDownDrawable;</b>
<b class="nc">&nbsp;    gameUITable.add(iconsButton).width(100 * scaleX).height(30 * scaleY).expandX()</b>
<b class="nc">&nbsp;        .align(Align.center).uniform();</b>
<b class="nc">&nbsp;    iconsButton.addListener(new ClickListener() {</b>
&nbsp;      @Override
&nbsp;      public void clicked(InputEvent event, float x, float y) {
<b class="nc">&nbsp;        Gdx.input.setInputProcessor(instructionsStage);</b>
<b class="nc">&nbsp;        isInstructionsVisible = true;</b>
<b class="nc">&nbsp;        instructionsStage.clear();</b>
<b class="nc">&nbsp;        instructionsStage.addActor(iconsImage);</b>
<b class="nc">&nbsp;        instructionsStage.addActor(instructionsTable);</b>
&nbsp;      }
&nbsp;    });
&nbsp;
&nbsp;    // Creates the pause button
<b class="nc">&nbsp;    TextureRegion pauseBtn = new TextureRegion(new Texture(&quot;PauseUp.png&quot;));</b>
<b class="nc">&nbsp;    TextureRegion pauseBtnDown = new TextureRegion(new Texture(&quot;PauseDown.png&quot;));</b>
<b class="nc">&nbsp;    TextureRegion powerUpMenuBtn = new TextureRegion(</b>
&nbsp;        new Texture(&quot;PowerupAssets/PowerUpMenuButton.png&quot;));
<b class="nc">&nbsp;    Drawable pauseBtnDrawable = new TextureRegionDrawable(pauseBtn);</b>
<b class="nc">&nbsp;    Drawable pauseBtnDrawableDown = new TextureRegionDrawable(pauseBtnDown);</b>
<b class="nc">&nbsp;    Drawable powerUpButtonUp = new TextureRegionDrawable(powerUpMenuBtn);</b>
<b class="nc">&nbsp;    Button.ButtonStyle pauseButtonStyle = new Button.ButtonStyle();</b>
<b class="nc">&nbsp;    Button.ButtonStyle powerUpButtonStyle = new Button.ButtonStyle();</b>
<b class="nc">&nbsp;    Button pauseButton = new Button();</b>
<b class="nc">&nbsp;    Button powerUpButton = new Button();</b>
<b class="nc">&nbsp;    pauseButton.setStyle(pauseButtonStyle);</b>
<b class="nc">&nbsp;    powerUpButton.setStyle(powerUpButtonStyle);</b>
<b class="nc">&nbsp;    pauseButtonStyle.up = pauseBtnDrawable;</b>
<b class="nc">&nbsp;    pauseButtonStyle.down = pauseBtnDrawableDown;</b>
<b class="nc">&nbsp;    powerUpButtonStyle.up = powerUpButtonUp;</b>
<b class="nc">&nbsp;    powerUpButtonStyle.down = powerUpButtonUp;</b>
<b class="nc">&nbsp;    gameUITable.add(powerUpButton).width(80 * scaleX).height(40 * scaleY).expandX();</b>
<b class="nc">&nbsp;    gameUITable.add(pauseButton).width(48 * scaleX).height(52 * scaleY).expandX()</b>
<b class="nc">&nbsp;        .align(Align.topRight).row();</b>
<b class="nc">&nbsp;    pauseButton.addListener(new ClickListener() {</b>
&nbsp;      @Override
&nbsp;      public void clicked(InputEvent event, float x, float y) {
<b class="nc">&nbsp;        paused = true;</b>
<b class="nc">&nbsp;        Gdx.input.setInputProcessor(pauseStage); // set the input processor to the pause stage</b>
&nbsp;      }
&nbsp;    });
<b class="nc">&nbsp;    powerUpButton.addListener(new ClickListener() {</b>
&nbsp;      @Override
&nbsp;      public void clicked(InputEvent event, float x, float y) {
<b class="nc">&nbsp;        powerupPurchaseMenu.showPowerUpMenu();</b>
&nbsp;      }
&nbsp;    });
&nbsp;    // Creates the button which is use to increase the number of chefs
<b class="nc">&nbsp;    TextureRegion addChefBtn = new TextureRegion(new Texture(&quot;AddChef.png&quot;));</b>
<b class="nc">&nbsp;    TextureRegion addChefBtnDown = new TextureRegion(new Texture(&quot;AddChefDown.png&quot;));</b>
<b class="nc">&nbsp;    Drawable addChefBtnDrawable = new TextureRegionDrawable(addChefBtn);</b>
<b class="nc">&nbsp;    Drawable addChefBtnDrawableDown = new TextureRegionDrawable(addChefBtnDown);</b>
<b class="nc">&nbsp;    Button.ButtonStyle addChefButtonStyle = new Button.ButtonStyle();</b>
<b class="nc">&nbsp;    Button addChefButton = new Button();</b>
<b class="nc">&nbsp;    addChefButton.setStyle(addChefButtonStyle);</b>
<b class="nc">&nbsp;    addChefButtonStyle.up = addChefBtnDrawable;</b>
<b class="nc">&nbsp;    addChefButtonStyle.down = addChefBtnDrawableDown;</b>
<b class="nc">&nbsp;    gameUITable.add(addChefButton).width(48 * scaleX).padTop(10 * scaleY).height(52 * scaleY)</b>
<b class="nc">&nbsp;        .align(Align.right)</b>
<b class="nc">&nbsp;        .colspan(6).row();</b>
&nbsp;
&nbsp;    // Creates the label which displays an error message if the player tries to add a
&nbsp;    // chef when they do not have enough money
&nbsp;    // or if they already have the maximum number of chefs
<b class="nc">&nbsp;    Label chefError = new Label(&quot;&quot;, new LabelStyle(new BitmapFont(), Color.WHITE));</b>
<b class="nc">&nbsp;    chefError.setWrap(true);</b>
<b class="nc">&nbsp;    chefError.setWidth(5);</b>
<b class="nc">&nbsp;    chefError.setAlignment(Align.center);</b>
<b class="nc">&nbsp;    chefError.setFontScale(0.75f * scaleX, 0.75f * scaleY);</b>
<b class="nc">&nbsp;    gameUITable.add(chefError).width(50 * scaleX).colspan(6).align(Align.right).row();</b>
&nbsp;
<b class="nc">&nbsp;    addChefButton.addListener(new ClickListener() {</b>
&nbsp;      @Override
&nbsp;      public void clicked(InputEvent event, float x, float y) {
<b class="nc">&nbsp;        if (customerController.getMoney() &gt;= 50 &amp;&amp; masterChef.getChefList().size() &lt; 5) {</b>
<b class="nc">&nbsp;          masterChef.AddNewChefIn();</b>
<b class="nc">&nbsp;          customerController.changeMoney(-50);</b>
<b class="nc">&nbsp;          chefError.setText(&quot;&quot;);</b>
<b class="nc">&nbsp;        } else if (masterChef.getChefList().size() &gt;= 5) {</b>
<b class="nc">&nbsp;          chefError.setText(&quot;You already have the maximum number of chefs&quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;          chefError.setText(&quot;You do not have enough money to call in more chefs&quot;);</b>
&nbsp;        }
&nbsp;      }
&nbsp;    });
&nbsp;
<b class="nc">&nbsp;    Image muteImage = new Image(new Texture(&quot;m_key.png&quot;));</b>
<b class="nc">&nbsp;    muteImage.setSize(70, 48);</b>
<b class="nc">&nbsp;    gameUITable.add(muteImage).width(70 * scaleX).height(48 * scaleY).expandX().expandY().colspan(6)</b>
<b class="nc">&nbsp;        .align(Align.bottomRight);</b>
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * BlackCatStudio&#39;s code
&nbsp;   */
&nbsp;  private void updateCustomerLabel() {
<b class="nc">&nbsp;    if (isEndlessMode) {</b>
<b class="nc">&nbsp;      modeLabel.setText(&quot;Customers served: &quot; + customerController.getNumberOfCustomersServed());</b>
&nbsp;    } else {
<b class="nc">&nbsp;      modeLabel.setText(</b>
<b class="nc">&nbsp;          &quot;Customers remaining: &quot; + customerController.getRemainingNumberOfCustomers());</b>
&nbsp;    }
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Creates the pause menu. BlackCatStudio&#39;s code
&nbsp;   *
&nbsp;   * @author Jack Vickers
&nbsp;   * @date 07/04/2023
&nbsp;   */
&nbsp;  private void setupPauseMenu() {
&nbsp;
<b class="nc">&nbsp;    Image pauseImage = new Image(new Texture(&quot;SemiTransparentBG.png&quot;));</b>
<b class="nc">&nbsp;    pauseImage.setSize(pauseStage.getWidth(), pauseStage.getHeight());</b>
<b class="nc">&nbsp;    pauseImage.setPosition(0, 0);</b>
<b class="nc">&nbsp;    pauseStage.addActor(pauseImage);</b>
<b class="nc">&nbsp;    Table pauseTable = new Table(); // create a table to hold the pause menu</b>
<b class="nc">&nbsp;    pauseStage.addActor(pauseTable); // add the table to the stage</b>
<b class="nc">&nbsp;    pauseTable.setFillParent(true);</b>
<b class="nc">&nbsp;    pauseTable.align(Align.center);</b>
&nbsp;
&nbsp;    // The following block of code creates the resume button and adds it to the table
<b class="nc">&nbsp;    TextureRegion resumeBtn = new TextureRegion(new Texture(&quot;ResumeUp.png&quot;));</b>
<b class="nc">&nbsp;    TextureRegion resumeBtnDown = new TextureRegion(new Texture(&quot;ResumeDown.png&quot;));</b>
<b class="nc">&nbsp;    Drawable drawableResumeBtn = new TextureRegionDrawable(resumeBtn);</b>
<b class="nc">&nbsp;    Drawable drawableResumeBtnDown = new TextureRegionDrawable(resumeBtnDown);</b>
<b class="nc">&nbsp;    Button.ButtonStyle resumeButtonStyle = new Button.ButtonStyle();</b>
<b class="nc">&nbsp;    Button resumeButton = new Button();</b>
<b class="nc">&nbsp;    resumeButton.setStyle(resumeButtonStyle);</b>
<b class="nc">&nbsp;    resumeButtonStyle.up = drawableResumeBtn;</b>
<b class="nc">&nbsp;    resumeButtonStyle.down = drawableResumeBtnDown;</b>
<b class="nc">&nbsp;    pauseTable.add(resumeButton).width(250 * scaleX).height(50 * scaleY).padBottom(50 * scaleY)</b>
<b class="nc">&nbsp;        .padTop(80 * scaleY);</b>
<b class="nc">&nbsp;    pauseTable.row();</b>
&nbsp;
&nbsp;    // The following block of code adds a listener to the resume button
<b class="nc">&nbsp;    resumeButton.addListener(new ClickListener() {</b>
&nbsp;      @Override
&nbsp;      public void clicked(InputEvent event, float x, float y) {
<b class="nc">&nbsp;        paused = false; // when clicked, the game is no longer paused</b>
<b class="nc">&nbsp;        Gdx.input.setInputProcessor(gameUIStage); // set the input processor to the game UI stage</b>
&nbsp;      }
&nbsp;    });
&nbsp;
&nbsp;    // The following block of code creates the save button and adds it to the table
<b class="nc">&nbsp;    TextureRegion saveBtn = new TextureRegion(new Texture(&quot;SaveUp.png&quot;));</b>
<b class="nc">&nbsp;    TextureRegion saveBtnDown = new TextureRegion(new Texture(&quot;SaveDown.png&quot;));</b>
<b class="nc">&nbsp;    Drawable drawableSaveBtn = new TextureRegionDrawable(saveBtn);</b>
<b class="nc">&nbsp;    Drawable drawableSaveBtnDown = new TextureRegionDrawable(saveBtnDown);</b>
<b class="nc">&nbsp;    Button.ButtonStyle saveButtonStyle = new Button.ButtonStyle();</b>
<b class="nc">&nbsp;    Button saveButton = new Button();</b>
<b class="nc">&nbsp;    saveButton.setStyle(saveButtonStyle);</b>
<b class="nc">&nbsp;    saveButtonStyle.up = drawableSaveBtn;</b>
<b class="nc">&nbsp;    saveButtonStyle.down = drawableSaveBtnDown;</b>
<b class="nc">&nbsp;    pauseTable.add(saveButton).width(250 * scaleX).height(50 * scaleY).padBottom(20 * scaleY);</b>
<b class="nc">&nbsp;    pauseTable.row();</b>
&nbsp;
&nbsp;    // Creates a label for the save button which will be used to give the user feedback
<b class="nc">&nbsp;    Label saveLabel = new Label(&quot;&quot;, new LabelStyle(new BitmapFont(), Color.WHITE));</b>
<b class="nc">&nbsp;    saveLabel.setFontScale((scaleX + scaleY) / 2);</b>
&nbsp;
<b class="nc">&nbsp;    saveLabel.setAlignment(Align.right);</b>
<b class="nc">&nbsp;    pauseTable.add(saveLabel).padBottom(10 * scaleY);</b>
<b class="nc">&nbsp;    pauseTable.row();</b>
&nbsp;
&nbsp;    // The following block of code adds a listener to the save button
<b class="nc">&nbsp;    saveButton.addListener(new ClickListener() {</b>
&nbsp;      @Override
&nbsp;      public void clicked(InputEvent event, float x, float y) {
<b class="nc">&nbsp;        saveGame();</b>
<b class="nc">&nbsp;        saveLabel.setText(&quot;Game has successfully been saved&quot;);</b>
&nbsp;      }
&nbsp;    });
&nbsp;
&nbsp;    // The following block of code creates the quit button and adds it to the table
<b class="nc">&nbsp;    TextureRegion quitBtn = new TextureRegion(new Texture(&quot;ExitUp.png&quot;));</b>
<b class="nc">&nbsp;    TextureRegion quitBtnDown = new TextureRegion(new Texture(&quot;ExitDown.png&quot;));</b>
<b class="nc">&nbsp;    Drawable drawableQuitBtn = new TextureRegionDrawable(quitBtn);</b>
<b class="nc">&nbsp;    Drawable drawableQuitBtnDown = new TextureRegionDrawable(quitBtnDown);</b>
<b class="nc">&nbsp;    Button.ButtonStyle quitButtonStyle = new Button.ButtonStyle();</b>
<b class="nc">&nbsp;    Button quitButton = new Button();</b>
<b class="nc">&nbsp;    quitButton.setStyle(quitButtonStyle);</b>
<b class="nc">&nbsp;    quitButtonStyle.up = drawableQuitBtn;</b>
<b class="nc">&nbsp;    quitButtonStyle.down = drawableQuitBtnDown;</b>
<b class="nc">&nbsp;    pauseTable.add(quitButton).width(250 * scaleX).height(50 * scaleY).padBottom(50 * scaleY);</b>
<b class="nc">&nbsp;    pauseTable.row();</b>
&nbsp;
&nbsp;    // The following block of code adds a listener to the quit button
<b class="nc">&nbsp;    quitButton.addListener(new ClickListener() {</b>
&nbsp;      @Override
&nbsp;      public void clicked(InputEvent event, float x, float y) {
<b class="nc">&nbsp;        gameMusic.stop();</b>
<b class="nc">&nbsp;        game.setScreen(new MenuScreen(game));</b>
&nbsp;      }
&nbsp;    });
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * End game sequence BlackCatStudio&#39;s code
&nbsp;   *
&nbsp;   * @param values the values
&nbsp;   */
&nbsp;  public void endGame(EndOfGameValues values) {
<b class="nc">&nbsp;    if (!isEndlessMode) {</b>
<b class="nc">&nbsp;      endScreen = new EndScreen(game, this, timer, values, -1);</b>
&nbsp;    } else {
<b class="nc">&nbsp;      endScreen = new EndScreen(game, this, timer, values,</b>
<b class="nc">&nbsp;          customerController.getNumberOfCustomersServed());</b>
&nbsp;    }
<b class="nc">&nbsp;    gameMusic.stop();</b>
<b class="nc">&nbsp;    game.setScreen(endScreen);</b>
&nbsp;
&nbsp;  }
&nbsp;
&nbsp;
&nbsp;  /**
&nbsp;   * Plays the game music when the screen is shown. BlackCatStudio&#39;s code
&nbsp;   *
&nbsp;   * @author Amy Cross
&nbsp;   * @author Jack Vickers
&nbsp;   */
&nbsp;  @Override
&nbsp;  public void show() {
<b class="nc">&nbsp;    if (!gameMusic.isPlaying()) {</b>
<b class="nc">&nbsp;      gameMusic.setVolume(0.6f);</b>
<b class="nc">&nbsp;      gameMusic.play(); // only play the music if it&#39;s not already playing</b>
&nbsp;    }
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Displays the timer. Mixture of BlackCatStudios and Team Triple10s
&nbsp;   *
&nbsp;   * @author Amy Cross
&nbsp;   * @author Felix Seanor
&nbsp;   */
&nbsp;  public void displayTimer() {
&nbsp;    //Team Triple10s
<b class="nc">&nbsp;    seconds += Gdx.graphics.getDeltaTime();</b>
<b class="nc">&nbsp;    if (seconds &gt;= 1f) {</b>
<b class="nc">&nbsp;      timer++;</b>
<b class="nc">&nbsp;      seconds = 0f;</b>
&nbsp;    }
<b class="nc">&nbsp;    CharSequence str = &quot;TIME: &quot; + timer;</b>
<b class="nc">&nbsp;    timerFont.draw(game.batch, str, 380, 35);</b>
<b class="nc">&nbsp;    timerFont.getData().setScale(1.5f, 1.5f);</b>
<b class="nc">&nbsp;    timerLabel.setText(str);</b>
&nbsp;    //BlackCatStudios
<b class="nc">&nbsp;    CharSequence str2 = &quot;Money: ¥&quot; + customerController.money;</b>
<b class="nc">&nbsp;    timerFont.draw(game.batch, str2, 500, 35);</b>
<b class="nc">&nbsp;    timerFont.getData().setScale(1.5f, 1.5f);</b>
&nbsp;
<b class="nc">&nbsp;    if (customerController.reputation != -1) {</b>
<b class="nc">&nbsp;      CharSequence str3 = &quot;Reputation: &quot; + customerController.reputation;</b>
<b class="nc">&nbsp;      timerFont.draw(game.batch, str3, 650, 35);</b>
<b class="nc">&nbsp;      timerFont.getData().setScale(1.5f, 1.5f);</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    CharSequence str3 = &quot;Patience: &quot;;</b>
<b class="nc">&nbsp;    timerFont.draw(game.batch, str3, 200, 25);</b>
&nbsp;
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Calls all logic updates and sprite draws as well as checks if game has been completed Mainly
&nbsp;   * BlackCatStudios code based on Team Triple10s design
&nbsp;   *
&nbsp;   * @param delta The time in seconds since the last render.
&nbsp;   * @author Felix Seanor
&nbsp;   * @author Amy Cross
&nbsp;   * @author Jack Hinton
&nbsp;   */
&nbsp;  @Override
&nbsp;  public void render(float delta) {
&nbsp;    //Team Triple10s
&nbsp;    //create world
<b class="nc">&nbsp;    Gdx.gl.glClearColor(0, 0, 0, 1);</b>
<b class="nc">&nbsp;    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);</b>
&nbsp;
&nbsp;    //create camera
<b class="nc">&nbsp;    camera.update();</b>
<b class="nc">&nbsp;    mapRenderer.setView(camera);</b>
<b class="nc">&nbsp;    mapRenderer.render();</b>
&nbsp;
&nbsp;    //Black Cat Studios
&nbsp;
&nbsp;    /*if (Gdx.input.isKeyJustPressed(Keys.V)) {
&nbsp;      loadGame(&quot;SavedData.ser&quot;);
&nbsp;    }*/
&nbsp;
&nbsp;    //Removed and simplified logic
&nbsp;
<b class="nc">&nbsp;    game.batch.setProjectionMatrix(camera.combined);</b>
<b class="nc">&nbsp;    game.batch.enableBlending();</b>
&nbsp;
&nbsp;    //Begins drawing the game batch
<b class="nc">&nbsp;    game.batch.begin();</b>
&nbsp;    // Mutes or plays the music
<b class="nc">&nbsp;    if (Gdx.input.isKeyJustPressed((Input.Keys.M))) {</b>
<b class="nc">&nbsp;      if (gameMusic.isPlaying()) {</b>
<b class="nc">&nbsp;        SoundFrame.SoundEngine.muteSound();</b>
<b class="nc">&nbsp;        gameMusic.stop();</b>
&nbsp;      } else {
<b class="nc">&nbsp;        SoundFrame.SoundEngine.unmuteSound();</b>
<b class="nc">&nbsp;        gameMusic.play();</b>
&nbsp;      }
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    if (!paused &amp;&amp; !isInstructionsVisible) {</b>
&nbsp;
<b class="nc">&nbsp;      displayTimer();</b>
&nbsp;      //Update Scripts
<b class="nc">&nbsp;      GameObjectManager.objManager.doUpdate(Gdx.graphics.getDeltaTime());</b>
<b class="nc">&nbsp;      updateCustomerLabel();</b>
&nbsp;      //New rendering system
<b class="nc">&nbsp;      RenderManager.renderer.onRender(game.batch);</b>
&nbsp;    /*  if (Gdx.input.isKeyJustPressed(Input.Keys.G)) {
&nbsp;        powerup.doSpeedPowerup();
&nbsp;      }
&nbsp;      if (Gdx.input.isKeyJustPressed(Input.Keys.H)) {
&nbsp;        powerup.buyReputation();
&nbsp;      }
&nbsp;      if (Gdx.input.isKeyJustPressed(Input.Keys.J)) {
&nbsp;        powerup.superFood();
&nbsp;      }
&nbsp;      if (Gdx.input.isKeyJustPressed(Input.Keys.K)) {
&nbsp;        powerup.tetrisSuperFoodGive();
&nbsp;      }*/
<b class="nc">&nbsp;    } else if (paused &amp;&amp; !isInstructionsVisible) {</b>
<b class="nc">&nbsp;      pauseStage.draw();</b>
&nbsp;    } else {
<b class="nc">&nbsp;      instructionsStage.draw();</b>
&nbsp;    }
<b class="nc">&nbsp;    game.batch.end();</b>
&nbsp;
&nbsp;    // The following code must occur after the batch is ended.
&nbsp;    // Otherwise, it causes issues with customer positioning.
<b class="nc">&nbsp;    if (!paused &amp;&amp; !isInstructionsVisible) { // displays the game UI if the game is not paused</b>
<b class="nc">&nbsp;      gameUIStage.draw();</b>
&nbsp;    }
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Save the game. BlackCatStudios Code
&nbsp;   *
&nbsp;   * @author Felix Seanor
&nbsp;   */
&nbsp;  public void saveGame() {
<b class="nc">&nbsp;    SaveState saving = new SaveState();</b>
<b class="nc">&nbsp;    saving.saveState(&quot;SavedData.ser&quot;, masterChef, customerController, difficulty, timer, seconds,</b>
&nbsp;        constructMachines.stations, constructMachines.customerCounters,
&nbsp;        constructMachines.assemblyStations);
&nbsp;
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Load the game from save BlackCatStudios Code
&nbsp;   *
&nbsp;   * @param path the path
&nbsp;   * @author Felix Seanor
&nbsp;   */
&nbsp;  public void loadGame(String path) {
<b class="nc">&nbsp;    SaveState saving = new SaveState();</b>
&nbsp;
<b class="nc">&nbsp;    GameState state = saving.loadState(path);</b>
&nbsp;
<b class="nc">&nbsp;    loadState(state);</b>
<b class="nc">&nbsp;    masterChef.LoadState(state);</b>
<b class="nc">&nbsp;    customerController.loadState(state);</b>
&nbsp;
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Loads the state of a previous state of the world, all LoadGame to a full sweep. BlackCatStudios
&nbsp;   * Code
&nbsp;   *
&nbsp;   * @param state the state
&nbsp;   * @author Felix Seanor
&nbsp;   */
&nbsp;  public void loadState(GameState state) {
&nbsp;
<b class="nc">&nbsp;    int i = 0;</b>
<b class="nc">&nbsp;    timer = state.timer;</b>
<b class="nc">&nbsp;    seconds = state.seconds;</b>
<b class="nc">&nbsp;    difficulty = state.difficulty;</b>
<b class="nc">&nbsp;    for (GameObject station : constructMachines.stations) {</b>
<b class="nc">&nbsp;      Scriptable scriptable = station.getScript(0);</b>
<b class="nc">&nbsp;      if (scriptable instanceof Station) {</b>
<b class="nc">&nbsp;        ((Station) scriptable).loadState(state.foodOnCounters.get(i), state.repairState.get(i++));</b>
&nbsp;      }
&nbsp;
&nbsp;
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    for (GameObject station : constructMachines.customerCounters) {</b>
<b class="nc">&nbsp;      ((Station) station.getScript(0)).loadState(state.foodOnCounters.get(i++), true);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    for (GameObject station : constructMachines.assemblyStations) {</b>
<b class="nc">&nbsp;      ((Station) station.getScript(0)).loadState(state.foodOnCounters.get(i++), true);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;  }
&nbsp;
&nbsp;
&nbsp;  /**
&nbsp;   * Gets difficulty.
&nbsp;   *
&nbsp;   * @return the difficulty
&nbsp;   */
&nbsp;  public Difficulty getDifficulty() {
<b class="nc">&nbsp;    return difficulty;</b>
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Gets timer.
&nbsp;   *
&nbsp;   * @return the timer
&nbsp;   */
&nbsp;  public int getTimer() {
<b class="nc">&nbsp;    return timer;</b>
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Gets seconds.
&nbsp;   *
&nbsp;   * @return the seconds
&nbsp;   */
&nbsp;  public float getSeconds() {
<b class="nc">&nbsp;    return seconds;</b>
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Gets stations.
&nbsp;   *
&nbsp;   * @return the stations
&nbsp;   */
&nbsp;  public List&lt;GameObject&gt; getStations() {
<b class="nc">&nbsp;    return constructMachines.stations;</b>
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Gets customer counters.
&nbsp;   *
&nbsp;   * @return the customer counters
&nbsp;   */
&nbsp;  public List&lt;GameObject&gt; getCustomerCounters() {
<b class="nc">&nbsp;    return constructMachines.customerCounters;</b>
&nbsp;  }
&nbsp;
&nbsp;  /**
&nbsp;   * Gets assembly stations.
&nbsp;   *
&nbsp;   * @return the assembly stations
&nbsp;   */
&nbsp;  public List&lt;GameObject&gt; getAssemblyStations() {
<b class="nc">&nbsp;    return constructMachines.assemblyStations;</b>
&nbsp;  }
&nbsp;
&nbsp;
&nbsp;  //  /**
&nbsp;//   * Resizes the stage when the window is resized so that the buttons are in the correct place.
&nbsp;//   * Parameters inherited from interface com.badlogic.gdx.Screen and not explicitly used.
&nbsp;  // Team Triple 10s
&nbsp;//   */
&nbsp;  @Override
&nbsp;  public void resize(int width, int height) {
<b class="nc">&nbsp;    pauseStage.getViewport().update(width, height, true);</b>
<b class="nc">&nbsp;    gameUIStage.getViewport().update(width, height, true);</b>
<b class="nc">&nbsp;    instructionsStage.getViewport().update(width, height, true);</b>
&nbsp;  }
&nbsp;
&nbsp;  @Override
&nbsp;  public void pause() {
<b class="nc">&nbsp;  }</b>
&nbsp;
&nbsp;
&nbsp;  @Override
&nbsp;  public void resume() {
<b class="nc">&nbsp;  }</b>
&nbsp;
&nbsp;  @Override
&nbsp;  public void hide() {
<b class="nc">&nbsp;  }</b>
&nbsp;
&nbsp;  /**
&nbsp;   * Disposes of all sprites from memory to keep it optimised
&nbsp;   *
&nbsp;   * @author Felix Seanor
&nbsp;   */
&nbsp;  @Override
&nbsp;  public void dispose() {
<b class="nc">&nbsp;    game.batch.dispose();</b>
&nbsp;  }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-05-03 05:12</div>
</div>
</body>
</html>
